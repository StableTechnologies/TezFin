Table Of Contents

 CFA2 tests
# Accounts
# Contracts
# Check transferIn
## Try mint not as operator
## Mint as operator
## Second mint
## Try mint with no cash
# Check getCash
## Before accrueInterest
## After accrueInterest
## getTotalSupply
# Check setCash
## Try direct call
## Try with callback
# Check transferOut
# Check verifySweepFA12
## With underlying token and correct id
## With underlying token and wrong id
## With random token
Comment...
 h1: CFA2 tests
Comment...
 h2: Accounts
Computing sp.list([sp.test_account("Alice"), sp.test_account("admin")])...
 => sp.list([sp.record(seed = 'Alice', address = sp.address('tz1WxrQuZ4CK1MBUa2GqUWK1yJ4J6EtG1Gwi'), public_key = sp.key('edpkuvNy6TuQ2z8o9wnoaTtTXkzQk7nhegCHfxBc4ecsd4qG71KYNG'), public_key_hash = sp.key_hash('tz1WxrQuZ4CK1MBUa2GqUWK1yJ4J6EtG1Gwi'), secret_key = sp.secret_key('edskRijgcXx8gzqkq7SCBbrb6aDZQMmP6dznCQWgU1Jr4qPfJT1yFq5A39ja9G4wahS8uWtBurZy14Hy7GZkQh7WnopJTKtCQG')), sp.record(seed = 'admin', address = sp.address('tz1UyQDepgtUBnWjyzzonqeDwaiWoQzRKSP5'), public_key = sp.key('edpkthtmpNV7DzPgvsU5ktVkfYbARpb2nzDbncU8mdbMeXGRhGTjN7'), public_key_hash = sp.key_hash('tz1UyQDepgtUBnWjyzzonqeDwaiWoQzRKSP5'), secret_key = sp.secret_key('edskRjPeZkNsmeJ8aAzs5vyXVhP7DVRvG6nM1ReNfjzkR3h6ykbf71mPxQyE5HU9FHrV3EdrY4GVCSBWhU44v6bnhQGrKM9Cs8'))])
Comment...
 h2: Contracts
Creating contract
 -> (Pair (Pair True True) (Pair True True))
 => ../TezFinTest/CFA2_Tests/step_005_cont_0_storage.tz 1
 => ../TezFinTest/CFA2_Tests/step_005_cont_0_storage.json 1
 => ../TezFinTest/CFA2_Tests/step_005_cont_0_sizes.csv 2
 => ../TezFinTest/CFA2_Tests/step_005_cont_0_storage.py 1
 => ../TezFinTest/CFA2_Tests/step_005_cont_0_types.py 7
 => ../TezFinTest/CFA2_Tests/step_005_cont_0_contract.tz 253
 => ../TezFinTest/CFA2_Tests/step_005_cont_0_contract.json 532
 => ../TezFinTest/CFA2_Tests/step_005_cont_0_contract.py 125
 => ../TezFinTest/CFA2_Tests/step_005_cont_0_contract.py.html 2181
Creating contract
 -> (Pair 840000000000 180000000000)
 => ../TezFinTest/CFA2_Tests/step_006_cont_1_storage.tz 1
 => ../TezFinTest/CFA2_Tests/step_006_cont_1_storage.json 1
 => ../TezFinTest/CFA2_Tests/step_006_cont_1_sizes.csv 2
 => ../TezFinTest/CFA2_Tests/step_006_cont_1_storage.py 1
 => ../TezFinTest/CFA2_Tests/step_006_cont_1_types.py 7
 => ../TezFinTest/CFA2_Tests/step_006_cont_1_contract.tz 50
 => ../TezFinTest/CFA2_Tests/step_006_cont_1_contract.json 116
 => ../TezFinTest/CFA2_Tests/step_006_cont_1_contract.py 27
 => ../TezFinTest/CFA2_Tests/step_006_cont_1_contract.py.html 2107
Creating contract
 -> (Pair (Pair (Pair "tz1UyQDepgtUBnWjyzzonqeDwaiWoQzRKSP5" 0) (Pair {} {Elt "" 0x68747470733a2f2f6578616d706c652e636f6d})) (Pair (Pair {} False) (Pair {} {})))
 => ../TezFinTest/CFA2_Tests/step_007_cont_2_storage.tz 1
 => ../TezFinTest/CFA2_Tests/step_007_cont_2_storage.json 13
 => ../TezFinTest/CFA2_Tests/step_007_cont_2_sizes.csv 2
 => ../TezFinTest/CFA2_Tests/step_007_cont_2_storage.py 1
 => ../TezFinTest/CFA2_Tests/step_007_cont_2_types.py 7
 => ../TezFinTest/CFA2_Tests/step_007_cont_2_metadata.metadata_base.json 177
 => ../TezFinTest/CFA2_Tests/step_007_cont_2_contract.tz 774
 => ../TezFinTest/CFA2_Tests/step_007_cont_2_contract.json 1031
 => ../TezFinTest/CFA2_Tests/step_007_cont_2_contract.py 85
 => ../TezFinTest/CFA2_Tests/step_007_cont_2_contract.py.html 2163
Creating contract
 -> None
 => ../TezFinTest/CFA2_Tests/step_008_cont_3_storage.tz 1
 => ../TezFinTest/CFA2_Tests/step_008_cont_3_storage.json 1
 => ../TezFinTest/CFA2_Tests/step_008_cont_3_sizes.csv 2
 => ../TezFinTest/CFA2_Tests/step_008_cont_3_storage.py 1
 => ../TezFinTest/CFA2_Tests/step_008_cont_3_types.py 7
 => ../TezFinTest/CFA2_Tests/step_008_cont_3_contract.tz 20
 => ../TezFinTest/CFA2_Tests/step_008_cont_3_contract.json 19
 => ../TezFinTest/CFA2_Tests/step_008_cont_3_contract.py 15
 => ../TezFinTest/CFA2_Tests/step_008_cont_3_contract.py.html 2097
Creating contract
 -> (Pair (Pair (Pair (Pair (Pair 0 (Pair 5 {})) (Pair "tz1UyQDepgtUBnWjyzzonqeDwaiWoQzRKSP5" (Pair {} 1000000000000000000))) (Pair (Pair 5000000000000 (Pair 0 "KT1TezoooozzSmartPyzzSTATiCzzzwwBFA1")) (Pair 0 (Pair 1000000000000000000 "KT1Tezooo2zzSmartPyzzSTATiCzzzwqqQ4H")))) (Pair (Pair (Pair 500000000000000000 (Pair 1000000000000000000 "KT1Tezooo1zzSmartPyzzSTATiCzzzyfC8eF")) (Pair False (Pair None 0))) (Pair (Pair 1000000000000000000 (Pair 0 0)) (Pair 0 (Pair 0 0))))) {Elt 0 { UNPAIR; IF_LEFT { IF_LEFT { IF_LEFT { DROP } { PUSH int -1; FAILWITH } } { PUSH int -1; FAILWITH } } { PUSH int -1; FAILWITH }; DUP; GET 3; GET 5; IF_NONE { PUSH string "CT_NOT_SET_PENDING_ADMIN"; FAILWITH } {}; SENDER; COMPARE; EQ; IF {} { PUSH string "CT_NOT_PENDING_ADMIN"; FAILWITH }; DUP; UNPAIR; UNPAIR; UNPAIR; SWAP; CDR; DIG 4; GET 3; GET 5; IF_NONE { PUSH int 593; FAILWITH } {}; PAIR; SWAP; PAIR; PAIR; SWAP; UNPAIR; UNPAIR; SWAP; UNPAIR; SWAP; CDR; NONE address; PAIR; SWAP; PAIR; SWAP; PAIR; PAIR; SWAP; PAIR; NIL operation; PAIR }; Elt 1 { UNPAIR; IF_LEFT { IF_LEFT { IF_LEFT { PUSH int -1; FAILWITH } { IF_LEFT {} { PUSH int -1; FAILWITH } } } { PUSH int -1; FAILWITH } } { PUSH int -1; FAILWITH }; SELF_ADDRESS; SENDER; COMPARE; NEQ; IF {} { PUSH string "CT_INTERNAL_CALL"; FAILWITH }; PUSH nat 0; DUP 3; CAR; CAR; GET 5; SENDER; GET; IF_NONE { PUSH int 281; FAILWITH } {}; GET 3; DUP 3; CAR; GET; IF_NONE { PUSH nat 0 } {}; COMPARE; EQ; IF { PUSH bool True } { DUP; CDR; PUSH nat 0; COMPARE; EQ }; IF {} { PUSH string "CT_UNSAFE_ALLOWANCE_CHANGE"; FAILWITH }; SWAP; UNPAIR; UNPAIR; UNPAIR; SWAP; UNPAIR; SWAP; UNPAIR; DUP; SENDER; DUP; DUG 2; GET; IF_NONE { PUSH int 283; FAILWITH } {}; DUP; GET 3; DUP 10; CDR; SOME; DIG 10; CAR; UPDATE; UPDATE 3; SOME; SWAP; UPDATE; PAIR; SWAP; PAIR; SWAP; PAIR; PAIR; PAIR; NIL operation; PAIR }; Elt 2 { UNPAIR; IF_LEFT { IF_LEFT { IF_LEFT { PUSH int -1; FAILWITH } { IF_LEFT { PUSH int -1; FAILWITH } {} } } { PUSH int -1; FAILWITH } } { PUSH int -1; FAILWITH }; SWAP; DUP; DUG 2; GET 3; CAR; GET 4; SENDER; COMPARE; EQ; IF {} { PUSH string "CT_SENDER_NOT_IRM"; FAILWITH }; SWAP; DUP; DUG 2; CAR; CAR; CAR; GET 4; PUSH nat 8; MEM; IF {} { PUSH string "OP_NOT_ACTIVE"; FAILWITH }; SWAP; UNPAIR; UNPAIR; UNPAIR; UNPAIR; SWAP; UNPAIR; SWAP; PUSH bool False; PUSH nat 8; UPDATE; SWAP; PAIR; SWAP; PAIR; PAIR; PAIR; PAIR; DUP; DUG 2; CAR; GET 3; CAR; SWAP; DUP; DUG 2; COMPARE; LE; IF {} { PUSH string "CT_INVALID_BORROW_RATE"; FAILWITH }; SWAP; DUP; DUG 2; CAR; CAR; CAR; CAR; LEVEL; SUB; ISNAT; IF_NONE { PUSH int 543; FAILWITH } {}; MUL; SWAP; DUP; DUG 2; CAR; GET 7; DUP 3; GET 7; DUP 3; MUL; EDIV; IF_NONE { PUSH int 58; FAILWITH } { CAR }; DIG 2; DUP; GET 7; DUP 3; ADD; UPDATE 7; DUP; DUP; GET 9; SWAP; DUP; DUG 5; CAR; GET 7; DIG 3; DIG 5; GET 3; GET 6; MUL; EDIV; IF_NONE { PUSH int 58; FAILWITH } { CAR }; ADD; UPDATE 9; DUP; DUG 2; UNPAIR; UNPAIR; UNPAIR; SWAP; UNPAIR; SWAP; CAR; DUP 7; CAR; CAR; GET 6; DUP 8; CAR; GET 7; DIG 8; CAR; CAR; GET 6; DIG 8; MUL; EDIV; IF_NONE { PUSH int 58; FAILWITH } { CAR }; ADD; SWAP; PAIR; SWAP; PAIR; SWAP; CDR; LEVEL; PAIR; PAIR; PAIR; PAIR; NIL operation; PAIR }; Elt 3 { UNPAIR; IF_LEFT { IF_LEFT { PUSH int -1; FAILWITH } { IF_LEFT { DROP } { PUSH int -1; FAILWITH } } } { PUSH int -1; FAILWITH }; DUP; CAR; CAR; GET 3; SENDER; COMPARE; EQ; IF {} { PUSH string "CT_NOT_ADMIN"; FAILWITH }; UNPAIR; UNPAIR; UNPAIR; UNPAIR; SWAP; CAR; EMPTY_SET nat; SWAP; PAIR; SWAP; PAIR; PAIR; PAIR; PAIR; NIL operation; PAIR }; Elt 4 { UNPAIR; IF_LEFT { IF_LEFT { PUSH int -1; FAILWITH } { IF_LEFT { PUSH int -1; FAILWITH } { IF_LEFT {} { PUSH int -1; FAILWITH } } } } { PUSH int -1; FAILWITH }; SELF_ADDRESS; SENDER; COMPARE; EQ; IF {} { PUSH string "CT_INTERNAL_FUNCTION"; FAILWITH }; SWAP; DUP; DUG 2; CAR; CAR; CAR; GET 4; PUSH nat 12; MEM; IF {} { PUSH string "OP_NOT_ACTIVE"; FAILWITH }; SWAP; UNPAIR; UNPAIR; UNPAIR; UNPAIR; SWAP; UNPAIR; SWAP; PUSH bool False; PUSH nat 12; UPDATE; SWAP; PAIR; SWAP; PAIR; PAIR; PAIR; PAIR; SWAP; DUP; DUP 3; CAR; GET 5; COMPARE; GE; IF {} { PUSH string "CT_INSUFFICIENT_CASH"; FAILWITH }; SWAP; DUP; DUG 2; GET 9; SWAP; DUP; DUG 2; COMPARE; LE; IF {} { PUSH string "CT_REDUCE_AMOUNT"; FAILWITH }; SWAP; DUP; DUG 2; SWAP; DUP; DUG 2; DIG 3; GET 9; SUB; ISNAT; IF_NONE { PUSH string "SUBTRACTION_UNDERFLOW"; FAILWITH } {}; UPDATE 9; SWAP; NIL operation; DUP 3; CAR; GET 8; CONTRACT %transfer (list (pair address (list (pair address (pair nat nat))))); IF_NONE { PUSH int 36; FAILWITH } {}; PUSH mutez 0; NIL (pair address (list (pair address (pair nat nat)))); NIL (pair address (pair nat nat)); DIG 5; DUP 7; GET 5; GET 4; DUP 8; CAR; CAR; GET 3; PAIR 3; CONS; SELF_ADDRESS; PAIR; CONS; TRANSFER_TOKENS; CONS; SWAP; UNPAIR; SWAP; UNPAIR; UNPAIR; SWAP; CDR; PUSH bool False; PAIR; SWAP; PAIR; PAIR; SWAP; PAIR; SWAP; PAIR }; Elt 5 { UNPAIR; IF_LEFT { IF_LEFT { PUSH int -1; FAILWITH } { IF_LEFT { PUSH int -1; FAILWITH } { IF_LEFT { PUSH int -1; FAILWITH } { DROP } } } } { PUSH int -1; FAILWITH }; DUP; CAR; CAR; GET 3; SENDER; COMPARE; EQ; IF {} { PUSH string "CT_NOT_ADMIN"; FAILWITH }; UNPAIR; SWAP; UNPAIR; UNPAIR; SWAP; UNPAIR; SWAP; CDR; NONE address; PAIR; SWAP; PAIR; SWAP; PAIR; PAIR; SWAP; PAIR; NIL operation; PAIR }; Elt 6 { UNPAIR; IF_LEFT { PUSH int -1; FAILWITH } { IF_LEFT { IF_LEFT {} { PUSH int -1; FAILWITH } } { PUSH int -1; FAILWITH } }; SWAP; DUP; DUG 2; GET 3; CAR; GET 4; SENDER; COMPARE; EQ; IF {} { PUSH string "CT_SENDER_NOT_IRM"; FAILWITH }; SWAP; DUP; DUG 2; CAR; CAR; CAR; GET 4; PUSH nat 6; MEM; IF {} { PUSH string "OP_NOT_ACTIVE"; FAILWITH }; SWAP; UNPAIR; UNPAIR; UNPAIR; UNPAIR; SWAP; UNPAIR; SWAP; PUSH bool False; PUSH nat 6; UPDATE; SWAP; PAIR; SWAP; PAIR; PAIR; SWAP; UNPAIR; UNPAIR; SWAP; CDR; DIG 5; PAIR; SWAP; PAIR; PAIR; SWAP; PAIR; PAIR; NIL operation; PAIR }; Elt 7 { UNPAIR; IF_LEFT { PUSH int -1; FAILWITH } { IF_LEFT { IF_LEFT { PUSH int -1; FAILWITH } { IF_LEFT {} { PUSH int -1; FAILWITH } } } { PUSH int -1; FAILWITH } }; SWAP; DUP; DUG 2; CAR; CAR; CAR; GET 4; PUSH nat 13; MEM; IF {} { PUSH string "OP_NOT_ACTIVE"; FAILWITH }; SWAP; UNPAIR; UNPAIR; UNPAIR; UNPAIR; SWAP; UNPAIR; SWAP; PUSH bool False; PUSH nat 13; UPDATE; SWAP; PAIR; SWAP; PAIR; PAIR; PAIR; PAIR; DUP; DUG 2; CAR; GET 8; SENDER; COMPARE; EQ; IF {} { PUSH string "CT_INVALID_CASH_SENDER"; FAILWITH }; DUP; SIZE; PUSH nat 1; COMPARE; EQ; IF {} { PUSH string "CT_INVALID_CASH_DATA"; FAILWITH }; DUP; ITER { DUP 3; GET 5; GET 4; SWAP; DUP; DUG 2; CAR; CDR; COMPARE; EQ; IF {} { PUSH string "CT_INVALID_CASH_DATA"; FAILWITH }; DUP; CAR; CAR; SELF_ADDRESS; COMPARE; EQ; IF {} { PUSH string "CT_INVALID_CASH_DATA"; FAILWITH }; DIG 2; UNPAIR; UNPAIR; SWAP; UNPAIR; SWAP; CDR; DIG 4; CDR; PAIR; SWAP; PAIR; SWAP; PAIR; PAIR; SWAP }; DROP; NIL operation; PAIR }; Elt 8 { UNPAIR; IF_LEFT { PUSH int -1; FAILWITH } { IF_LEFT { IF_LEFT { PUSH int -1; FAILWITH } { IF_LEFT { PUSH int -1; FAILWITH } {} } } { PUSH int -1; FAILWITH } }; SWAP; DUP; DUG 2; CAR; CAR; GET 3; SENDER; COMPARE; EQ; IF {} { PUSH string "CT_NOT_ADMIN"; FAILWITH }; SWAP; UNPAIR; UNPAIR; SWAP; UNPAIR; UNPAIR; SWAP; CAR; DIG 5; SWAP; PAIR; SWAP; PAIR; PAIR; SWAP; PAIR; PAIR; NIL operation; PAIR }; Elt 9 { UNPAIR; IF_LEFT { PUSH int -1; FAILWITH } { IF_LEFT { PUSH int -1; FAILWITH } { IF_LEFT { IF_LEFT {} { PUSH int -1; FAILWITH } } { PUSH int -1; FAILWITH } } }; SELF_ADDRESS; SENDER; COMPARE; EQ; IF {} { PUSH string "CT_INTERNAL_FUNCTION"; FAILWITH }; SWAP; DUP; DUG 2; CAR; CAR; CAR; GET 4; PUSH nat 9; MEM; IF {} { PUSH string "OP_NOT_ACTIVE"; FAILWITH }; SWAP; UNPAIR; UNPAIR; UNPAIR; UNPAIR; SWAP; UNPAIR; SWAP; PUSH bool False; PUSH nat 9; UPDATE; SWAP; PAIR; SWAP; PAIR; PAIR; PAIR; SWAP; UNPAIR; UNPAIR; UNPAIR; SWAP; CAR; DIG 5; SWAP; PAIR; SWAP; PAIR; PAIR; PAIR; SWAP; PAIR; NIL operation; PAIR }; Elt 10 { UNPAIR; IF_LEFT { PUSH int -1; FAILWITH } { IF_LEFT { PUSH int -1; FAILWITH } { IF_LEFT { IF_LEFT { PUSH int -1; FAILWITH } {} } { PUSH int -1; FAILWITH } } }; SWAP; DUP; DUG 2; CAR; CAR; GET 3; SENDER; COMPARE; EQ; IF {} { PUSH string "CT_NOT_ADMIN"; FAILWITH }; SWAP; UNPAIR; SWAP; UNPAIR; UNPAIR; SWAP; UNPAIR; SWAP; CDR; DIG 5; SOME; PAIR; SWAP; PAIR; SWAP; PAIR; PAIR; SWAP; PAIR; NIL operation; PAIR }; Elt 11 { UNPAIR; IF_LEFT { PUSH int -1; FAILWITH } { IF_LEFT { PUSH int -1; FAILWITH } { IF_LEFT { PUSH int -1; FAILWITH } { IF_LEFT {} { PUSH int -1; FAILWITH } } } }; SELF_ADDRESS; SENDER; COMPARE; EQ; IF {} { PUSH string "CT_INTERNAL_FUNCTION"; FAILWITH }; SWAP; DUP; DUG 2; CAR; CAR; CAR; GET 4; PUSH nat 10; MEM; IF {} { PUSH string "OP_NOT_ACTIVE"; FAILWITH }; SWAP; UNPAIR; UNPAIR; UNPAIR; UNPAIR; SWAP; UNPAIR; SWAP; PUSH bool False; PUSH nat 10; UPDATE; SWAP; PAIR; SWAP; PAIR; PAIR; PAIR; PAIR; DUP; DUG 2; CAR; CAR; CAR; CAR; LEVEL; SUB; ISNAT; IF_NONE { PUSH string "SUBTRACTION_UNDERFLOW"; FAILWITH } {}; DUP 3; CAR; CAR; CAR; GET 3; COMPARE; GT; IF {} { PUSH string "CT_INTEREST_OLD"; FAILWITH }; SWAP; DUP; DUG 2; GET 3; GET 3; IF {} { PUSH string "CT_INTEREST_INVALID"; FAILWITH }; SWAP; DUP; DUG 2; GET 5; CAR; SWAP; DUP; DUG 2; COMPARE; LE; IF {} { PUSH string "CT_INVALID_RESERVE_FACTOR"; FAILWITH }; SWAP; UNPAIR; SWAP; UNPAIR; UNPAIR; SWAP; GET 3; DIG 4; SWAP; PAIR; PUSH bool False; PAIR; SWAP; PAIR; PAIR; SWAP; PAIR; NIL operation; PAIR }; Elt 12 { UNPAIR; IF_LEFT { PUSH int -1; FAILWITH } { IF_LEFT { PUSH int -1; FAILWITH } { IF_LEFT { PUSH int -1; FAILWITH } { IF_LEFT { PUSH int -1; FAILWITH } {} } } }; SWAP; DUP; DUG 2; GET 3; CAR; GET 4; SENDER; COMPARE; EQ; IF {} { PUSH string "CT_SENDER_NOT_IRM"; FAILWITH }; SWAP; DUP; DUG 2; CAR; CAR; CAR; GET 4; PUSH nat 7; MEM; IF {} { PUSH string "OP_NOT_ACTIVE"; FAILWITH }; SWAP; UNPAIR; UNPAIR; UNPAIR; UNPAIR; SWAP; UNPAIR; SWAP; PUSH bool False; PUSH nat 7; UPDATE; SWAP; PAIR; SWAP; PAIR; PAIR; PAIR; SWAP; UNPAIR; SWAP; UNPAIR; UNPAIR; SWAP; CDR; DIG 5; PAIR; SWAP; PAIR; PAIR; SWAP; PAIR; SWAP; PAIR; NIL operation; PAIR }})
 => ../TezFinTest/CFA2_Tests/step_009_cont_4_storage.tz 1
 => ../TezFinTest/CFA2_Tests/step_009_cont_4_storage.json 1264
 => ../TezFinTest/CFA2_Tests/step_009_cont_4_sizes.csv 2
 => ../TezFinTest/CFA2_Tests/step_009_cont_4_storage.py 1
 => ../TezFinTest/CFA2_Tests/step_009_cont_4_types.py 7
 => ../TezFinTest/CFA2_Tests/step_009_cont_4_contract.tz 4185
 => ../TezFinTest/CFA2_Tests/step_009_cont_4_contract.json 5386
 => ../TezFinTest/CFA2_Tests/step_009_cont_4_contract.py 695
 => ../TezFinTest/CFA2_Tests/step_009_cont_4_contract.py.html 2740
Comment...
 h2: Check transferIn
Comment...
 h3: Try mint not as operator
 => ../TezFinTest/CFA2_Tests/step_012_cont_4_params.py 1
 => ../TezFinTest/CFA2_Tests/step_012_cont_4_params.tz 1
 => ../TezFinTest/CFA2_Tests/step_012_cont_4_params.json 1
Executing accrueInterest(sp.record())...
 -> (Pair (Pair (Pair (Pair 1 (Pair 5 {})) (Pair "tz1UyQDepgtUBnWjyzzonqeDwaiWoQzRKSP5" (Pair {} 1000000000000000000))) (Pair (Pair 5000000000000 (Pair 0 "KT1TezoooozzSmartPyzzSTATiCzzzwwBFA1")) (Pair 0 (Pair 1000000000000000000 "KT1Tezooo2zzSmartPyzzSTATiCzzzwqqQ4H")))) (Pair (Pair (Pair 500000000000000000 (Pair 1000000000000000000 "KT1Tezooo1zzSmartPyzzSTATiCzzzyfC8eF")) (Pair True (Pair None 0))) (Pair (Pair 1000000000000000000 (Pair 0 0)) (Pair 0 (Pair 0 0)))))
 => ../TezFinTest/CFA2_Tests/step_013_cont_2_params.py 1
 => ../TezFinTest/CFA2_Tests/step_013_cont_2_params.tz 1
 => ../TezFinTest/CFA2_Tests/step_013_cont_2_params.json 17
Executing mint(sp.record(address = sp.to_constant(sp.test_account("Alice").address), amount = 200, metadata = {'decimals' : sp.bytes('0x32'), 'name' : sp.bytes('0x54686520546f6b656e205a65726f'), 'symbol' : sp.bytes('0x544b30')}, token_id = 0))...
 -> (Pair (Pair (Pair "tz1UyQDepgtUBnWjyzzonqeDwaiWoQzRKSP5" 1) (Pair {Elt (Pair "tz1WxrQuZ4CK1MBUa2GqUWK1yJ4J6EtG1Gwi" 0) 200} {Elt "" 0x68747470733a2f2f6578616d706c652e636f6d})) (Pair (Pair {} False) (Pair {Elt 0 (Pair 0 {Elt "decimals" 0x32; Elt "name" 0x54686520546f6b656e205a65726f; Elt "symbol" 0x544b30})} {Elt 0 200})))
 => ../TezFinTest/CFA2_Tests/step_014_cont_4_params.py 1
 => ../TezFinTest/CFA2_Tests/step_014_cont_4_params.tz 1
 => ../TezFinTest/CFA2_Tests/step_014_cont_4_params.json 1
Executing mint(100)...
 -> (Pair (Pair (Pair (Pair 1 (Pair 5 {})) (Pair "tz1UyQDepgtUBnWjyzzonqeDwaiWoQzRKSP5" (Pair {Elt "tz1WxrQuZ4CK1MBUa2GqUWK1yJ4J6EtG1Gwi" (Pair (Pair 0 0) (Pair {} 100))} 1000000000000000000))) (Pair (Pair 5000000000000 (Pair 0 "KT1TezoooozzSmartPyzzSTATiCzzzwwBFA1")) (Pair 0 (Pair 1000000000000000000 "KT1Tezooo2zzSmartPyzzSTATiCzzzwqqQ4H")))) (Pair (Pair (Pair 500000000000000000 (Pair 1000000000000000000 "KT1Tezooo1zzSmartPyzzSTATiCzzzyfC8eF")) (Pair False (Pair None 0))) (Pair (Pair 1000000000000000000 (Pair 0 0)) (Pair 0 (Pair 0 100)))))
  + Transfer
     params: sp.record(cToken = sp.address('KT1Tezooo4zzSmartPyzzSTATiCzzzyPVdv3'), minter = sp.address('tz1WxrQuZ4CK1MBUa2GqUWK1yJ4J6EtG1Gwi'), mintAmount = 100)
     amount: sp.tez(0)
     to:     sp.contract(sp.TRecord(cToken = sp.TAddress, mintAmount = sp.TNat, minter = sp.TAddress).layout(("cToken", ("minter", "mintAmount"))), sp.address('KT1TezoooozzSmartPyzzSTATiCzzzwwBFA1%mintAllowed')).open_some()
  + Transfer
     params: sp.list([sp.record(from_ = sp.address('tz1WxrQuZ4CK1MBUa2GqUWK1yJ4J6EtG1Gwi'), txs = sp.list([sp.record(to_ = sp.address('KT1Tezooo4zzSmartPyzzSTATiCzzzyPVdv3'), token_id = 0, amount = 100)]))])
     amount: sp.tez(0)
     to:     sp.contract(sp.TList(sp.TRecord(from_ = sp.TAddress, txs = sp.TList(sp.TRecord(amount = sp.TNat, to_ = sp.TAddress, token_id = sp.TNat).layout(("to_", ("token_id", "amount"))))).layout(("from_", "txs"))), sp.address('KT1Tezooo2zzSmartPyzzSTATiCzzzwqqQ4H%transfer')).open_some()
Executing (queue) mintAllowed(sp.record(cToken = sp.address('KT1Tezooo4zzSmartPyzzSTATiCzzzyPVdv3'), minter = sp.address('tz1WxrQuZ4CK1MBUa2GqUWK1yJ4J6EtG1Gwi'), mintAmount = 100))...
 -> (Pair (Pair True True) (Pair True True))
Executing (queue) transfer(sp.list([sp.record(from_ = sp.address('tz1WxrQuZ4CK1MBUa2GqUWK1yJ4J6EtG1Gwi'), txs = sp.list([sp.record(to_ = sp.address('KT1Tezooo4zzSmartPyzzSTATiCzzzyPVdv3'), token_id = 0, amount = 100)]))]))...
 -> --- Expected failure in transaction --- Wrong condition: (((sp.sender == self.data.administrator) | (transfer.from_ == sp.sender)) | (self.data.operators.contains(sp.set_type_expr(sp.record(owner = transfer.from_, operator = sp.sender, token_id = tx.token_id), sp.TRecord(operator = sp.TAddress, owner = sp.TAddress, token_id = sp.TNat).layout(("owner", ("operator", "token_id")))))) : sp.TBool) (contracts/tests/mock/FA2Mock.py, line 385)
Message: 'FA2_NOT_OPERATOR'
 (contracts/tests/mock/FA2Mock.py, line 391)
Comment...
 h3: Mint as operator
 => ../TezFinTest/CFA2_Tests/step_016_cont_2_params.py 1
 => ../TezFinTest/CFA2_Tests/step_016_cont_2_params.tz 1
 => ../TezFinTest/CFA2_Tests/step_016_cont_2_params.json 11
Executing update_operators(sp.list([variant('add_operator', sp.set_type_expr(sp.record(owner = sp.to_constant(sp.test_account("Alice").address), operator = sp.address('KT1Tezooo4zzSmartPyzzSTATiCzzzyPVdv3'), token_id = 0), sp.TRecord(operator = sp.TAddress, owner = sp.TAddress, token_id = sp.TNat).layout(("owner", ("operator", "token_id")))))]))...
 -> (Pair (Pair (Pair "tz1UyQDepgtUBnWjyzzonqeDwaiWoQzRKSP5" 1) (Pair {Elt (Pair "tz1WxrQuZ4CK1MBUa2GqUWK1yJ4J6EtG1Gwi" 0) 200} {Elt "" 0x68747470733a2f2f6578616d706c652e636f6d})) (Pair (Pair {Elt (Pair "tz1WxrQuZ4CK1MBUa2GqUWK1yJ4J6EtG1Gwi" (Pair "KT1Tezooo4zzSmartPyzzSTATiCzzzyPVdv3" 0)) Unit} False) (Pair {Elt 0 (Pair 0 {Elt "decimals" 0x32; Elt "name" 0x54686520546f6b656e205a65726f; Elt "symbol" 0x544b30})} {Elt 0 200})))
 => ../TezFinTest/CFA2_Tests/step_017_cont_4_params.py 1
 => ../TezFinTest/CFA2_Tests/step_017_cont_4_params.tz 1
 => ../TezFinTest/CFA2_Tests/step_017_cont_4_params.json 1
Executing accrueInterest(sp.record())...
 -> (Pair (Pair (Pair (Pair 1 (Pair 5 {8})) (Pair "tz1UyQDepgtUBnWjyzzonqeDwaiWoQzRKSP5" (Pair {} 1000000000000000000))) (Pair (Pair 5000000000000 (Pair 0 "KT1TezoooozzSmartPyzzSTATiCzzzwwBFA1")) (Pair 0 (Pair 1000000000000000000 "KT1Tezooo2zzSmartPyzzSTATiCzzzwqqQ4H")))) (Pair (Pair (Pair 500000000000000000 (Pair 1000000000000000000 "KT1Tezooo1zzSmartPyzzSTATiCzzzyfC8eF")) (Pair True (Pair None 0))) (Pair (Pair 1000000000000000000 (Pair 0 0)) (Pair 0 (Pair 0 0)))))
  + Transfer
     params: sp.record(borrows = 0, cash = 0, cb = sp.contract(sp.TNat, sp.address('KT1Tezooo4zzSmartPyzzSTATiCzzzyPVdv3%doAccrueInterest')).open_some(), reserves = 0)
     amount: sp.tez(0)
     to:     sp.contract(sp.TRecord(borrows = sp.TNat, cash = sp.TNat, cb = sp.TContract(sp.TNat), reserves = sp.TNat).layout((("borrows", "cash"), ("cb", "reserves"))), sp.address('KT1Tezooo1zzSmartPyzzSTATiCzzzyfC8eF%getBorrowRate')).open_some()
Executing (queue) getBorrowRate(sp.record(borrows = 0, cash = 0, cb = sp.contract(sp.TNat, sp.address('KT1Tezooo4zzSmartPyzzSTATiCzzzyPVdv3%doAccrueInterest')).open_some(), reserves = 0))...
 -> (Pair 840000000000 180000000000)
  + Transfer
     params: 840000000000
     amount: sp.tez(0)
     to:     sp.contract(sp.TNat, sp.address('KT1Tezooo4zzSmartPyzzSTATiCzzzyPVdv3%doAccrueInterest')).open_some()
Executing (queue) doAccrueInterest(840000000000)...
 -> (Pair (Pair (Pair (Pair 3 (Pair 5 {})) (Pair "tz1UyQDepgtUBnWjyzzonqeDwaiWoQzRKSP5" (Pair {} 1000001680000000000))) (Pair (Pair 5000000000000 (Pair 0 "KT1TezoooozzSmartPyzzSTATiCzzzwwBFA1")) (Pair 0 (Pair 1000000000000000000 "KT1Tezooo2zzSmartPyzzSTATiCzzzwqqQ4H")))) (Pair (Pair (Pair 500000000000000000 (Pair 1000000000000000000 "KT1Tezooo1zzSmartPyzzSTATiCzzzyfC8eF")) (Pair True (Pair None 0))) (Pair (Pair 1000000000000000000 (Pair 0 0)) (Pair 0 (Pair 0 0)))))
 => ../TezFinTest/CFA2_Tests/step_018_cont_4_params.py 1
 => ../TezFinTest/CFA2_Tests/step_018_cont_4_params.tz 1
 => ../TezFinTest/CFA2_Tests/step_018_cont_4_params.json 1
Executing mint(100)...
 -> (Pair (Pair (Pair (Pair 3 (Pair 5 {})) (Pair "tz1UyQDepgtUBnWjyzzonqeDwaiWoQzRKSP5" (Pair {Elt "tz1WxrQuZ4CK1MBUa2GqUWK1yJ4J6EtG1Gwi" (Pair (Pair 0 0) (Pair {} 100))} 1000001680000000000))) (Pair (Pair 5000000000000 (Pair 0 "KT1TezoooozzSmartPyzzSTATiCzzzwwBFA1")) (Pair 0 (Pair 1000000000000000000 "KT1Tezooo2zzSmartPyzzSTATiCzzzwqqQ4H")))) (Pair (Pair (Pair 500000000000000000 (Pair 1000000000000000000 "KT1Tezooo1zzSmartPyzzSTATiCzzzyfC8eF")) (Pair False (Pair None 0))) (Pair (Pair 1000000000000000000 (Pair 0 0)) (Pair 0 (Pair 0 100)))))
  + Transfer
     params: sp.record(cToken = sp.address('KT1Tezooo4zzSmartPyzzSTATiCzzzyPVdv3'), minter = sp.address('tz1WxrQuZ4CK1MBUa2GqUWK1yJ4J6EtG1Gwi'), mintAmount = 100)
     amount: sp.tez(0)
     to:     sp.contract(sp.TRecord(cToken = sp.TAddress, mintAmount = sp.TNat, minter = sp.TAddress).layout(("cToken", ("minter", "mintAmount"))), sp.address('KT1TezoooozzSmartPyzzSTATiCzzzwwBFA1%mintAllowed')).open_some()
  + Transfer
     params: sp.list([sp.record(from_ = sp.address('tz1WxrQuZ4CK1MBUa2GqUWK1yJ4J6EtG1Gwi'), txs = sp.list([sp.record(to_ = sp.address('KT1Tezooo4zzSmartPyzzSTATiCzzzyPVdv3'), token_id = 0, amount = 100)]))])
     amount: sp.tez(0)
     to:     sp.contract(sp.TList(sp.TRecord(from_ = sp.TAddress, txs = sp.TList(sp.TRecord(amount = sp.TNat, to_ = sp.TAddress, token_id = sp.TNat).layout(("to_", ("token_id", "amount"))))).layout(("from_", "txs"))), sp.address('KT1Tezooo2zzSmartPyzzSTATiCzzzwqqQ4H%transfer')).open_some()
Executing (queue) mintAllowed(sp.record(cToken = sp.address('KT1Tezooo4zzSmartPyzzSTATiCzzzyPVdv3'), minter = sp.address('tz1WxrQuZ4CK1MBUa2GqUWK1yJ4J6EtG1Gwi'), mintAmount = 100))...
 -> (Pair (Pair True True) (Pair True True))
Executing (queue) transfer(sp.list([sp.record(from_ = sp.address('tz1WxrQuZ4CK1MBUa2GqUWK1yJ4J6EtG1Gwi'), txs = sp.list([sp.record(to_ = sp.address('KT1Tezooo4zzSmartPyzzSTATiCzzzyPVdv3'), token_id = 0, amount = 100)]))]))...
 -> (Pair (Pair (Pair "tz1UyQDepgtUBnWjyzzonqeDwaiWoQzRKSP5" 1) (Pair {Elt (Pair "KT1Tezooo4zzSmartPyzzSTATiCzzzyPVdv3" 0) 100; Elt (Pair "tz1WxrQuZ4CK1MBUa2GqUWK1yJ4J6EtG1Gwi" 0) 100} {Elt "" 0x68747470733a2f2f6578616d706c652e636f6d})) (Pair (Pair {Elt (Pair "tz1WxrQuZ4CK1MBUa2GqUWK1yJ4J6EtG1Gwi" (Pair "KT1Tezooo4zzSmartPyzzSTATiCzzzyPVdv3" 0)) Unit} False) (Pair {Elt 0 (Pair 0 {Elt "decimals" 0x32; Elt "name" 0x54686520546f6b656e205a65726f; Elt "symbol" 0x544b30})} {Elt 0 200})))
Verifying sp.contract_data(4).balances[sp.to_constant(sp.test_account("Alice").address)].balance == 100...
 OK
Comment...
 h3: Second mint
 => ../TezFinTest/CFA2_Tests/step_021_cont_4_params.py 1
 => ../TezFinTest/CFA2_Tests/step_021_cont_4_params.tz 1
 => ../TezFinTest/CFA2_Tests/step_021_cont_4_params.json 1
Executing accrueInterest(sp.record())...
 -> (Pair (Pair (Pair (Pair 3 (Pair 5 {8; 13})) (Pair "tz1UyQDepgtUBnWjyzzonqeDwaiWoQzRKSP5" (Pair {Elt "tz1WxrQuZ4CK1MBUa2GqUWK1yJ4J6EtG1Gwi" (Pair (Pair 0 0) (Pair {} 100))} 1000001680000000000))) (Pair (Pair 5000000000000 (Pair 0 "KT1TezoooozzSmartPyzzSTATiCzzzwwBFA1")) (Pair 0 (Pair 1000000000000000000 "KT1Tezooo2zzSmartPyzzSTATiCzzzwqqQ4H")))) (Pair (Pair (Pair 500000000000000000 (Pair 1000000000000000000 "KT1Tezooo1zzSmartPyzzSTATiCzzzyfC8eF")) (Pair True (Pair None 0))) (Pair (Pair 1000000000000000000 (Pair 0 0)) (Pair 0 (Pair 0 100)))))
  + Transfer
     params: sp.record(requests = sp.list([sp.record(owner = sp.address('KT1Tezooo4zzSmartPyzzSTATiCzzzyPVdv3'), token_id = 0)]), callback = sp.contract(sp.TList(sp.TRecord(balance = sp.TNat, request = sp.TRecord(owner = sp.TAddress, token_id = sp.TNat).layout(("owner", "token_id"))).layout(("request", "balance"))), sp.address('KT1Tezooo4zzSmartPyzzSTATiCzzzyPVdv3%setCash')).open_some())
     amount: sp.tez(0)
     to:     sp.contract(sp.TRecord(callback = sp.TContract(sp.TList(sp.TRecord(balance = sp.TNat, request = sp.TRecord(owner = sp.TAddress, token_id = sp.TNat).layout(("owner", "token_id"))).layout(("request", "balance")))), requests = sp.TList(sp.TRecord(owner = sp.TAddress, token_id = sp.TNat).layout(("owner", "token_id")))).layout(("requests", "callback")), sp.address('KT1Tezooo2zzSmartPyzzSTATiCzzzwqqQ4H%balance_of')).open_some()
  + Transfer
     params: sp.record(borrows = 0, cash = 0, cb = sp.contract(sp.TNat, sp.address('KT1Tezooo4zzSmartPyzzSTATiCzzzyPVdv3%doAccrueInterest')).open_some(), reserves = 0)
     amount: sp.tez(0)
     to:     sp.contract(sp.TRecord(borrows = sp.TNat, cash = sp.TNat, cb = sp.TContract(sp.TNat), reserves = sp.TNat).layout((("borrows", "cash"), ("cb", "reserves"))), sp.address('KT1Tezooo1zzSmartPyzzSTATiCzzzyfC8eF%getBorrowRate')).open_some()
Executing (queue) balance_of(sp.record(requests = sp.list([sp.record(owner = sp.address('KT1Tezooo4zzSmartPyzzSTATiCzzzyPVdv3'), token_id = 0)]), callback = sp.contract(sp.TList(sp.TRecord(balance = sp.TNat, request = sp.TRecord(owner = sp.TAddress, token_id = sp.TNat).layout(("owner", "token_id"))).layout(("request", "balance"))), sp.address('KT1Tezooo4zzSmartPyzzSTATiCzzzyPVdv3%setCash')).open_some()))...
 -> (Pair (Pair (Pair "tz1UyQDepgtUBnWjyzzonqeDwaiWoQzRKSP5" 1) (Pair {Elt (Pair "KT1Tezooo4zzSmartPyzzSTATiCzzzyPVdv3" 0) 100; Elt (Pair "tz1WxrQuZ4CK1MBUa2GqUWK1yJ4J6EtG1Gwi" 0) 100} {Elt "" 0x68747470733a2f2f6578616d706c652e636f6d})) (Pair (Pair {Elt (Pair "tz1WxrQuZ4CK1MBUa2GqUWK1yJ4J6EtG1Gwi" (Pair "KT1Tezooo4zzSmartPyzzSTATiCzzzyPVdv3" 0)) Unit} False) (Pair {Elt 0 (Pair 0 {Elt "decimals" 0x32; Elt "name" 0x54686520546f6b656e205a65726f; Elt "symbol" 0x544b30})} {Elt 0 200})))
  + Transfer
     params: sp.list([sp.record(request = sp.record(owner = sp.address('KT1Tezooo4zzSmartPyzzSTATiCzzzyPVdv3'), token_id = 0), balance = 100)])
     amount: sp.tez(0)
     to:     sp.contract(sp.TList(sp.TRecord(balance = sp.TNat, request = sp.TRecord(owner = sp.TAddress, token_id = sp.TNat).layout(("owner", "token_id"))).layout(("request", "balance"))), sp.address('KT1Tezooo4zzSmartPyzzSTATiCzzzyPVdv3%setCash')).open_some()
Executing (queue) setCash(sp.list([sp.record(request = sp.record(owner = sp.address('KT1Tezooo4zzSmartPyzzSTATiCzzzyPVdv3'), token_id = 0), balance = 100)]))...
 -> (Pair (Pair (Pair (Pair 3 (Pair 5 {8})) (Pair "tz1UyQDepgtUBnWjyzzonqeDwaiWoQzRKSP5" (Pair {Elt "tz1WxrQuZ4CK1MBUa2GqUWK1yJ4J6EtG1Gwi" (Pair (Pair 0 0) (Pair {} 100))} 1000001680000000000))) (Pair (Pair 5000000000000 (Pair 0 "KT1TezoooozzSmartPyzzSTATiCzzzwwBFA1")) (Pair 100 (Pair 1000000000000000000 "KT1Tezooo2zzSmartPyzzSTATiCzzzwqqQ4H")))) (Pair (Pair (Pair 500000000000000000 (Pair 1000000000000000000 "KT1Tezooo1zzSmartPyzzSTATiCzzzyfC8eF")) (Pair True (Pair None 0))) (Pair (Pair 1000000000000000000 (Pair 0 0)) (Pair 0 (Pair 0 100)))))
Executing (queue) getBorrowRate(sp.record(borrows = 0, cash = 0, cb = sp.contract(sp.TNat, sp.address('KT1Tezooo4zzSmartPyzzSTATiCzzzyPVdv3%doAccrueInterest')).open_some(), reserves = 0))...
 -> (Pair 840000000000 180000000000)
  + Transfer
     params: 840000000000
     amount: sp.tez(0)
     to:     sp.contract(sp.TNat, sp.address('KT1Tezooo4zzSmartPyzzSTATiCzzzyPVdv3%doAccrueInterest')).open_some()
Executing (queue) doAccrueInterest(840000000000)...
 -> (Pair (Pair (Pair (Pair 5 (Pair 5 {})) (Pair "tz1UyQDepgtUBnWjyzzonqeDwaiWoQzRKSP5" (Pair {Elt "tz1WxrQuZ4CK1MBUa2GqUWK1yJ4J6EtG1Gwi" (Pair (Pair 0 0) (Pair {} 100))} 1000003360002822400))) (Pair (Pair 5000000000000 (Pair 0 "KT1TezoooozzSmartPyzzSTATiCzzzwwBFA1")) (Pair 100 (Pair 1000000000000000000 "KT1Tezooo2zzSmartPyzzSTATiCzzzwqqQ4H")))) (Pair (Pair (Pair 500000000000000000 (Pair 1000000000000000000 "KT1Tezooo1zzSmartPyzzSTATiCzzzyfC8eF")) (Pair True (Pair None 0))) (Pair (Pair 1000000000000000000 (Pair 0 0)) (Pair 0 (Pair 0 100)))))
 => ../TezFinTest/CFA2_Tests/step_022_cont_4_params.py 1
 => ../TezFinTest/CFA2_Tests/step_022_cont_4_params.tz 1
 => ../TezFinTest/CFA2_Tests/step_022_cont_4_params.json 1
Executing mint(100)...
 -> (Pair (Pair (Pair (Pair 5 (Pair 5 {})) (Pair "tz1UyQDepgtUBnWjyzzonqeDwaiWoQzRKSP5" (Pair {Elt "tz1WxrQuZ4CK1MBUa2GqUWK1yJ4J6EtG1Gwi" (Pair (Pair 0 0) (Pair {} 200))} 1000003360002822400))) (Pair (Pair 5000000000000 (Pair 0 "KT1TezoooozzSmartPyzzSTATiCzzzwwBFA1")) (Pair 100 (Pair 1000000000000000000 "KT1Tezooo2zzSmartPyzzSTATiCzzzwqqQ4H")))) (Pair (Pair (Pair 500000000000000000 (Pair 1000000000000000000 "KT1Tezooo1zzSmartPyzzSTATiCzzzyfC8eF")) (Pair False (Pair None 0))) (Pair (Pair 1000000000000000000 (Pair 0 0)) (Pair 0 (Pair 0 200)))))
  + Transfer
     params: sp.record(cToken = sp.address('KT1Tezooo4zzSmartPyzzSTATiCzzzyPVdv3'), minter = sp.address('tz1WxrQuZ4CK1MBUa2GqUWK1yJ4J6EtG1Gwi'), mintAmount = 100)
     amount: sp.tez(0)
     to:     sp.contract(sp.TRecord(cToken = sp.TAddress, mintAmount = sp.TNat, minter = sp.TAddress).layout(("cToken", ("minter", "mintAmount"))), sp.address('KT1TezoooozzSmartPyzzSTATiCzzzwwBFA1%mintAllowed')).open_some()
  + Transfer
     params: sp.list([sp.record(from_ = sp.address('tz1WxrQuZ4CK1MBUa2GqUWK1yJ4J6EtG1Gwi'), txs = sp.list([sp.record(to_ = sp.address('KT1Tezooo4zzSmartPyzzSTATiCzzzyPVdv3'), token_id = 0, amount = 100)]))])
     amount: sp.tez(0)
     to:     sp.contract(sp.TList(sp.TRecord(from_ = sp.TAddress, txs = sp.TList(sp.TRecord(amount = sp.TNat, to_ = sp.TAddress, token_id = sp.TNat).layout(("to_", ("token_id", "amount"))))).layout(("from_", "txs"))), sp.address('KT1Tezooo2zzSmartPyzzSTATiCzzzwqqQ4H%transfer')).open_some()
Executing (queue) mintAllowed(sp.record(cToken = sp.address('KT1Tezooo4zzSmartPyzzSTATiCzzzyPVdv3'), minter = sp.address('tz1WxrQuZ4CK1MBUa2GqUWK1yJ4J6EtG1Gwi'), mintAmount = 100))...
 -> (Pair (Pair True True) (Pair True True))
Executing (queue) transfer(sp.list([sp.record(from_ = sp.address('tz1WxrQuZ4CK1MBUa2GqUWK1yJ4J6EtG1Gwi'), txs = sp.list([sp.record(to_ = sp.address('KT1Tezooo4zzSmartPyzzSTATiCzzzyPVdv3'), token_id = 0, amount = 100)]))]))...
 -> (Pair (Pair (Pair "tz1UyQDepgtUBnWjyzzonqeDwaiWoQzRKSP5" 1) (Pair {Elt (Pair "KT1Tezooo4zzSmartPyzzSTATiCzzzyPVdv3" 0) 200; Elt (Pair "tz1WxrQuZ4CK1MBUa2GqUWK1yJ4J6EtG1Gwi" 0) 0} {Elt "" 0x68747470733a2f2f6578616d706c652e636f6d})) (Pair (Pair {Elt (Pair "tz1WxrQuZ4CK1MBUa2GqUWK1yJ4J6EtG1Gwi" (Pair "KT1Tezooo4zzSmartPyzzSTATiCzzzyPVdv3" 0)) Unit} False) (Pair {Elt 0 (Pair 0 {Elt "decimals" 0x32; Elt "name" 0x54686520546f6b656e205a65726f; Elt "symbol" 0x544b30})} {Elt 0 200})))
Verifying sp.contract_data(4).balances[sp.to_constant(sp.test_account("Alice").address)].balance == 200...
 OK
Comment...
 h3: Try mint with no cash
 => ../TezFinTest/CFA2_Tests/step_025_cont_4_params.py 1
 => ../TezFinTest/CFA2_Tests/step_025_cont_4_params.tz 1
 => ../TezFinTest/CFA2_Tests/step_025_cont_4_params.json 1
Executing mint(100)...
 -> --- Expected failure in transaction --- Wrong condition: (self.data.isAccrualInterestValid : sp.TBool) (contracts/CToken.py, line 523)
Message: 'CT_INTEREST_INVALID'
 (contracts/CToken.py, line 732)
Comment...
 h2: Check getCash
Comment...
 h3: Before accrueInterest
 => ../TezFinTest/CFA2_Tests/step_028_cont_4_params.py 1
 => ../TezFinTest/CFA2_Tests/step_028_cont_4_params.tz 1
 => ../TezFinTest/CFA2_Tests/step_028_cont_4_params.json 1
Executing getCash((sp.unit, sp.contract_typed(KT1Tezooo3zzSmartPyzzSTATiCzzzseJjWC%targetNat)))...
 -> (Pair (Pair (Pair (Pair 5 (Pair 5 {})) (Pair "tz1UyQDepgtUBnWjyzzonqeDwaiWoQzRKSP5" (Pair {Elt "tz1WxrQuZ4CK1MBUa2GqUWK1yJ4J6EtG1Gwi" (Pair (Pair 0 0) (Pair {} 200))} 1000003360002822400))) (Pair (Pair 5000000000000 (Pair 0 "KT1TezoooozzSmartPyzzSTATiCzzzwwBFA1")) (Pair 100 (Pair 1000000000000000000 "KT1Tezooo2zzSmartPyzzSTATiCzzzwqqQ4H")))) (Pair (Pair (Pair 500000000000000000 (Pair 1000000000000000000 "KT1Tezooo1zzSmartPyzzSTATiCzzzyfC8eF")) (Pair False (Pair None 0))) (Pair (Pair 1000000000000000000 (Pair 0 0)) (Pair 0 (Pair 0 200)))))
  + Transfer
     params: 100
     amount: sp.tez(0)
     to:     sp.contract(sp.TNat, sp.address('KT1Tezooo3zzSmartPyzzSTATiCzzzseJjWC%targetNat')).open_some()
Executing (queue) targetNat(100)...
 -> (Some 100)
Verifying sp.pack(sp.set_type_expr(sp.contract_data(3).last, sp.TOption(sp.TNat))) == sp.pack(sp.set_type_expr(sp.some(100), sp.TOption(sp.TNat)))...
 OK
Comment...
 h3: After accrueInterest
 => ../TezFinTest/CFA2_Tests/step_031_cont_4_params.py 1
 => ../TezFinTest/CFA2_Tests/step_031_cont_4_params.tz 1
 => ../TezFinTest/CFA2_Tests/step_031_cont_4_params.json 1
Executing accrueInterest(sp.record())...
 -> (Pair (Pair (Pair (Pair 5 (Pair 5 {8; 13})) (Pair "tz1UyQDepgtUBnWjyzzonqeDwaiWoQzRKSP5" (Pair {Elt "tz1WxrQuZ4CK1MBUa2GqUWK1yJ4J6EtG1Gwi" (Pair (Pair 0 0) (Pair {} 200))} 1000003360002822400))) (Pair (Pair 5000000000000 (Pair 0 "KT1TezoooozzSmartPyzzSTATiCzzzwwBFA1")) (Pair 100 (Pair 1000000000000000000 "KT1Tezooo2zzSmartPyzzSTATiCzzzwqqQ4H")))) (Pair (Pair (Pair 500000000000000000 (Pair 1000000000000000000 "KT1Tezooo1zzSmartPyzzSTATiCzzzyfC8eF")) (Pair True (Pair None 0))) (Pair (Pair 1000000000000000000 (Pair 0 0)) (Pair 0 (Pair 0 200)))))
  + Transfer
     params: sp.record(requests = sp.list([sp.record(owner = sp.address('KT1Tezooo4zzSmartPyzzSTATiCzzzyPVdv3'), token_id = 0)]), callback = sp.contract(sp.TList(sp.TRecord(balance = sp.TNat, request = sp.TRecord(owner = sp.TAddress, token_id = sp.TNat).layout(("owner", "token_id"))).layout(("request", "balance"))), sp.address('KT1Tezooo4zzSmartPyzzSTATiCzzzyPVdv3%setCash')).open_some())
     amount: sp.tez(0)
     to:     sp.contract(sp.TRecord(callback = sp.TContract(sp.TList(sp.TRecord(balance = sp.TNat, request = sp.TRecord(owner = sp.TAddress, token_id = sp.TNat).layout(("owner", "token_id"))).layout(("request", "balance")))), requests = sp.TList(sp.TRecord(owner = sp.TAddress, token_id = sp.TNat).layout(("owner", "token_id")))).layout(("requests", "callback")), sp.address('KT1Tezooo2zzSmartPyzzSTATiCzzzwqqQ4H%balance_of')).open_some()
  + Transfer
     params: sp.record(borrows = 0, cash = 100, cb = sp.contract(sp.TNat, sp.address('KT1Tezooo4zzSmartPyzzSTATiCzzzyPVdv3%doAccrueInterest')).open_some(), reserves = 0)
     amount: sp.tez(0)
     to:     sp.contract(sp.TRecord(borrows = sp.TNat, cash = sp.TNat, cb = sp.TContract(sp.TNat), reserves = sp.TNat).layout((("borrows", "cash"), ("cb", "reserves"))), sp.address('KT1Tezooo1zzSmartPyzzSTATiCzzzyfC8eF%getBorrowRate')).open_some()
Executing (queue) balance_of(sp.record(requests = sp.list([sp.record(owner = sp.address('KT1Tezooo4zzSmartPyzzSTATiCzzzyPVdv3'), token_id = 0)]), callback = sp.contract(sp.TList(sp.TRecord(balance = sp.TNat, request = sp.TRecord(owner = sp.TAddress, token_id = sp.TNat).layout(("owner", "token_id"))).layout(("request", "balance"))), sp.address('KT1Tezooo4zzSmartPyzzSTATiCzzzyPVdv3%setCash')).open_some()))...
 -> (Pair (Pair (Pair "tz1UyQDepgtUBnWjyzzonqeDwaiWoQzRKSP5" 1) (Pair {Elt (Pair "KT1Tezooo4zzSmartPyzzSTATiCzzzyPVdv3" 0) 200; Elt (Pair "tz1WxrQuZ4CK1MBUa2GqUWK1yJ4J6EtG1Gwi" 0) 0} {Elt "" 0x68747470733a2f2f6578616d706c652e636f6d})) (Pair (Pair {Elt (Pair "tz1WxrQuZ4CK1MBUa2GqUWK1yJ4J6EtG1Gwi" (Pair "KT1Tezooo4zzSmartPyzzSTATiCzzzyPVdv3" 0)) Unit} False) (Pair {Elt 0 (Pair 0 {Elt "decimals" 0x32; Elt "name" 0x54686520546f6b656e205a65726f; Elt "symbol" 0x544b30})} {Elt 0 200})))
  + Transfer
     params: sp.list([sp.record(request = sp.record(owner = sp.address('KT1Tezooo4zzSmartPyzzSTATiCzzzyPVdv3'), token_id = 0), balance = 200)])
     amount: sp.tez(0)
     to:     sp.contract(sp.TList(sp.TRecord(balance = sp.TNat, request = sp.TRecord(owner = sp.TAddress, token_id = sp.TNat).layout(("owner", "token_id"))).layout(("request", "balance"))), sp.address('KT1Tezooo4zzSmartPyzzSTATiCzzzyPVdv3%setCash')).open_some()
Executing (queue) setCash(sp.list([sp.record(request = sp.record(owner = sp.address('KT1Tezooo4zzSmartPyzzSTATiCzzzyPVdv3'), token_id = 0), balance = 200)]))...
 -> (Pair (Pair (Pair (Pair 5 (Pair 5 {8})) (Pair "tz1UyQDepgtUBnWjyzzonqeDwaiWoQzRKSP5" (Pair {Elt "tz1WxrQuZ4CK1MBUa2GqUWK1yJ4J6EtG1Gwi" (Pair (Pair 0 0) (Pair {} 200))} 1000003360002822400))) (Pair (Pair 5000000000000 (Pair 0 "KT1TezoooozzSmartPyzzSTATiCzzzwwBFA1")) (Pair 200 (Pair 1000000000000000000 "KT1Tezooo2zzSmartPyzzSTATiCzzzwqqQ4H")))) (Pair (Pair (Pair 500000000000000000 (Pair 1000000000000000000 "KT1Tezooo1zzSmartPyzzSTATiCzzzyfC8eF")) (Pair True (Pair None 0))) (Pair (Pair 1000000000000000000 (Pair 0 0)) (Pair 0 (Pair 0 200)))))
Executing (queue) getBorrowRate(sp.record(borrows = 0, cash = 100, cb = sp.contract(sp.TNat, sp.address('KT1Tezooo4zzSmartPyzzSTATiCzzzyPVdv3%doAccrueInterest')).open_some(), reserves = 0))...
 -> (Pair 840000000000 180000000000)
  + Transfer
     params: 840000000000
     amount: sp.tez(0)
     to:     sp.contract(sp.TNat, sp.address('KT1Tezooo4zzSmartPyzzSTATiCzzzyPVdv3%doAccrueInterest')).open_some()
Executing (queue) doAccrueInterest(840000000000)...
 -> (Pair (Pair (Pair (Pair 9 (Pair 5 {})) (Pair "tz1UyQDepgtUBnWjyzzonqeDwaiWoQzRKSP5" (Pair {Elt "tz1WxrQuZ4CK1MBUa2GqUWK1yJ4J6EtG1Gwi" (Pair (Pair 0 0) (Pair {} 200))} 1000006720014112009))) (Pair (Pair 5000000000000 (Pair 0 "KT1TezoooozzSmartPyzzSTATiCzzzwwBFA1")) (Pair 200 (Pair 1000000000000000000 "KT1Tezooo2zzSmartPyzzSTATiCzzzwqqQ4H")))) (Pair (Pair (Pair 500000000000000000 (Pair 1000000000000000000 "KT1Tezooo1zzSmartPyzzSTATiCzzzyfC8eF")) (Pair True (Pair None 0))) (Pair (Pair 1000000000000000000 (Pair 0 0)) (Pair 0 (Pair 0 200)))))
 => ../TezFinTest/CFA2_Tests/step_032_cont_4_params.py 1
 => ../TezFinTest/CFA2_Tests/step_032_cont_4_params.tz 1
 => ../TezFinTest/CFA2_Tests/step_032_cont_4_params.json 1
Executing getCash((sp.unit, sp.contract_typed(KT1Tezooo3zzSmartPyzzSTATiCzzzseJjWC%targetNat)))...
 -> (Pair (Pair (Pair (Pair 9 (Pair 5 {})) (Pair "tz1UyQDepgtUBnWjyzzonqeDwaiWoQzRKSP5" (Pair {Elt "tz1WxrQuZ4CK1MBUa2GqUWK1yJ4J6EtG1Gwi" (Pair (Pair 0 0) (Pair {} 200))} 1000006720014112009))) (Pair (Pair 5000000000000 (Pair 0 "KT1TezoooozzSmartPyzzSTATiCzzzwwBFA1")) (Pair 200 (Pair 1000000000000000000 "KT1Tezooo2zzSmartPyzzSTATiCzzzwqqQ4H")))) (Pair (Pair (Pair 500000000000000000 (Pair 1000000000000000000 "KT1Tezooo1zzSmartPyzzSTATiCzzzyfC8eF")) (Pair True (Pair None 0))) (Pair (Pair 1000000000000000000 (Pair 0 0)) (Pair 0 (Pair 0 200)))))
  + Transfer
     params: 200
     amount: sp.tez(0)
     to:     sp.contract(sp.TNat, sp.address('KT1Tezooo3zzSmartPyzzSTATiCzzzseJjWC%targetNat')).open_some()
Executing (queue) targetNat(200)...
 -> (Some 200)
Verifying sp.pack(sp.set_type_expr(sp.contract_data(3).last, sp.TOption(sp.TNat))) == sp.pack(sp.set_type_expr(sp.some(200), sp.TOption(sp.TNat)))...
 OK
Comment...
 h3: getTotalSupply
 => ../TezFinTest/CFA2_Tests/step_035_cont_4_params.py 1
 => ../TezFinTest/CFA2_Tests/step_035_cont_4_params.tz 1
 => ../TezFinTest/CFA2_Tests/step_035_cont_4_params.json 1
Executing getTotalSupply((sp.unit, sp.contract_typed(KT1Tezooo3zzSmartPyzzSTATiCzzzseJjWC%targetNat)))...
 -> (Pair (Pair (Pair (Pair 9 (Pair 5 {})) (Pair "tz1UyQDepgtUBnWjyzzonqeDwaiWoQzRKSP5" (Pair {Elt "tz1WxrQuZ4CK1MBUa2GqUWK1yJ4J6EtG1Gwi" (Pair (Pair 0 0) (Pair {} 200))} 1000006720014112009))) (Pair (Pair 5000000000000 (Pair 0 "KT1TezoooozzSmartPyzzSTATiCzzzwwBFA1")) (Pair 200 (Pair 1000000000000000000 "KT1Tezooo2zzSmartPyzzSTATiCzzzwqqQ4H")))) (Pair (Pair (Pair 500000000000000000 (Pair 1000000000000000000 "KT1Tezooo1zzSmartPyzzSTATiCzzzyfC8eF")) (Pair True (Pair None 0))) (Pair (Pair 1000000000000000000 (Pair 0 0)) (Pair 0 (Pair 0 200)))))
  + Transfer
     params: 200
     amount: sp.tez(0)
     to:     sp.contract(sp.TNat, sp.address('KT1Tezooo3zzSmartPyzzSTATiCzzzseJjWC%targetNat')).open_some()
Executing (queue) targetNat(200)...
 -> (Some 200)
Verifying sp.pack(sp.set_type_expr(sp.contract_data(3).last, sp.TOption(sp.TNat))) == sp.pack(sp.set_type_expr(sp.some(200), sp.TOption(sp.TNat)))...
 OK
Comment...
 h2: Check setCash
Comment...
 h3: Try direct call
 => ../TezFinTest/CFA2_Tests/step_039_cont_4_params.py 1
 => ../TezFinTest/CFA2_Tests/step_039_cont_4_params.tz 1
 => ../TezFinTest/CFA2_Tests/step_039_cont_4_params.json 1
Executing setCash(sp.list([sp.record(request = sp.record(owner = sp.address('KT1Tezooo4zzSmartPyzzSTATiCzzzyPVdv3'), token_id = 0), balance = 123)]))...
 -> --- Expected failure in transaction --- Wrong condition: (self.data.activeOperations.contains(13) : sp.TBool) (contracts/utils/OperationProtector.py, line 38)
Message: 'OP_NOT_ACTIVE'
 (contracts/utils/OperationProtector.py, line 38)
Comment...
 h3: Try with callback
 => ../TezFinTest/CFA2_Tests/step_041_cont_2_params.py 1
 => ../TezFinTest/CFA2_Tests/step_041_cont_2_params.tz 1
 => ../TezFinTest/CFA2_Tests/step_041_cont_2_params.json 7
Executing balance_of(sp.record(requests = sp.list([sp.record(owner = sp.address('KT1Tezooo4zzSmartPyzzSTATiCzzzyPVdv3'), token_id = 0)]), callback = sp.contract_typed(KT1Tezooo4zzSmartPyzzSTATiCzzzyPVdv3%setCash)))...
 -> (Pair (Pair (Pair "tz1UyQDepgtUBnWjyzzonqeDwaiWoQzRKSP5" 1) (Pair {Elt (Pair "KT1Tezooo4zzSmartPyzzSTATiCzzzyPVdv3" 0) 200; Elt (Pair "tz1WxrQuZ4CK1MBUa2GqUWK1yJ4J6EtG1Gwi" 0) 0} {Elt "" 0x68747470733a2f2f6578616d706c652e636f6d})) (Pair (Pair {Elt (Pair "tz1WxrQuZ4CK1MBUa2GqUWK1yJ4J6EtG1Gwi" (Pair "KT1Tezooo4zzSmartPyzzSTATiCzzzyPVdv3" 0)) Unit} False) (Pair {Elt 0 (Pair 0 {Elt "decimals" 0x32; Elt "name" 0x54686520546f6b656e205a65726f; Elt "symbol" 0x544b30})} {Elt 0 200})))
  + Transfer
     params: sp.list([sp.record(request = sp.record(owner = sp.address('KT1Tezooo4zzSmartPyzzSTATiCzzzyPVdv3'), token_id = 0), balance = 200)])
     amount: sp.tez(0)
     to:     sp.contract(sp.TList(sp.TRecord(balance = sp.TNat, request = sp.TRecord(owner = sp.TAddress, token_id = sp.TNat).layout(("owner", "token_id"))).layout(("request", "balance"))), sp.address('KT1Tezooo4zzSmartPyzzSTATiCzzzyPVdv3%setCash')).open_some()
Executing (queue) setCash(sp.list([sp.record(request = sp.record(owner = sp.address('KT1Tezooo4zzSmartPyzzSTATiCzzzyPVdv3'), token_id = 0), balance = 200)]))...
 -> --- Expected failure in transaction --- Wrong condition: (self.data.activeOperations.contains(13) : sp.TBool) (contracts/utils/OperationProtector.py, line 38)
Message: 'OP_NOT_ACTIVE'
 (contracts/utils/OperationProtector.py, line 38)
Comment...
 h2: Check transferOut
 => ../TezFinTest/CFA2_Tests/step_043_cont_4_params.py 1
 => ../TezFinTest/CFA2_Tests/step_043_cont_4_params.tz 1
 => ../TezFinTest/CFA2_Tests/step_043_cont_4_params.json 1
Executing accrueInterest(sp.record())...
 -> (Pair (Pair (Pair (Pair 9 (Pair 5 {8; 13})) (Pair "tz1UyQDepgtUBnWjyzzonqeDwaiWoQzRKSP5" (Pair {Elt "tz1WxrQuZ4CK1MBUa2GqUWK1yJ4J6EtG1Gwi" (Pair (Pair 0 0) (Pair {} 200))} 1000006720014112009))) (Pair (Pair 5000000000000 (Pair 0 "KT1TezoooozzSmartPyzzSTATiCzzzwwBFA1")) (Pair 200 (Pair 1000000000000000000 "KT1Tezooo2zzSmartPyzzSTATiCzzzwqqQ4H")))) (Pair (Pair (Pair 500000000000000000 (Pair 1000000000000000000 "KT1Tezooo1zzSmartPyzzSTATiCzzzyfC8eF")) (Pair True (Pair None 0))) (Pair (Pair 1000000000000000000 (Pair 0 0)) (Pair 0 (Pair 0 200)))))
  + Transfer
     params: sp.record(requests = sp.list([sp.record(owner = sp.address('KT1Tezooo4zzSmartPyzzSTATiCzzzyPVdv3'), token_id = 0)]), callback = sp.contract(sp.TList(sp.TRecord(balance = sp.TNat, request = sp.TRecord(owner = sp.TAddress, token_id = sp.TNat).layout(("owner", "token_id"))).layout(("request", "balance"))), sp.address('KT1Tezooo4zzSmartPyzzSTATiCzzzyPVdv3%setCash')).open_some())
     amount: sp.tez(0)
     to:     sp.contract(sp.TRecord(callback = sp.TContract(sp.TList(sp.TRecord(balance = sp.TNat, request = sp.TRecord(owner = sp.TAddress, token_id = sp.TNat).layout(("owner", "token_id"))).layout(("request", "balance")))), requests = sp.TList(sp.TRecord(owner = sp.TAddress, token_id = sp.TNat).layout(("owner", "token_id")))).layout(("requests", "callback")), sp.address('KT1Tezooo2zzSmartPyzzSTATiCzzzwqqQ4H%balance_of')).open_some()
  + Transfer
     params: sp.record(borrows = 0, cash = 200, cb = sp.contract(sp.TNat, sp.address('KT1Tezooo4zzSmartPyzzSTATiCzzzyPVdv3%doAccrueInterest')).open_some(), reserves = 0)
     amount: sp.tez(0)
     to:     sp.contract(sp.TRecord(borrows = sp.TNat, cash = sp.TNat, cb = sp.TContract(sp.TNat), reserves = sp.TNat).layout((("borrows", "cash"), ("cb", "reserves"))), sp.address('KT1Tezooo1zzSmartPyzzSTATiCzzzyfC8eF%getBorrowRate')).open_some()
Executing (queue) balance_of(sp.record(requests = sp.list([sp.record(owner = sp.address('KT1Tezooo4zzSmartPyzzSTATiCzzzyPVdv3'), token_id = 0)]), callback = sp.contract(sp.TList(sp.TRecord(balance = sp.TNat, request = sp.TRecord(owner = sp.TAddress, token_id = sp.TNat).layout(("owner", "token_id"))).layout(("request", "balance"))), sp.address('KT1Tezooo4zzSmartPyzzSTATiCzzzyPVdv3%setCash')).open_some()))...
 -> (Pair (Pair (Pair "tz1UyQDepgtUBnWjyzzonqeDwaiWoQzRKSP5" 1) (Pair {Elt (Pair "KT1Tezooo4zzSmartPyzzSTATiCzzzyPVdv3" 0) 200; Elt (Pair "tz1WxrQuZ4CK1MBUa2GqUWK1yJ4J6EtG1Gwi" 0) 0} {Elt "" 0x68747470733a2f2f6578616d706c652e636f6d})) (Pair (Pair {Elt (Pair "tz1WxrQuZ4CK1MBUa2GqUWK1yJ4J6EtG1Gwi" (Pair "KT1Tezooo4zzSmartPyzzSTATiCzzzyPVdv3" 0)) Unit} False) (Pair {Elt 0 (Pair 0 {Elt "decimals" 0x32; Elt "name" 0x54686520546f6b656e205a65726f; Elt "symbol" 0x544b30})} {Elt 0 200})))
  + Transfer
     params: sp.list([sp.record(request = sp.record(owner = sp.address('KT1Tezooo4zzSmartPyzzSTATiCzzzyPVdv3'), token_id = 0), balance = 200)])
     amount: sp.tez(0)
     to:     sp.contract(sp.TList(sp.TRecord(balance = sp.TNat, request = sp.TRecord(owner = sp.TAddress, token_id = sp.TNat).layout(("owner", "token_id"))).layout(("request", "balance"))), sp.address('KT1Tezooo4zzSmartPyzzSTATiCzzzyPVdv3%setCash')).open_some()
Executing (queue) setCash(sp.list([sp.record(request = sp.record(owner = sp.address('KT1Tezooo4zzSmartPyzzSTATiCzzzyPVdv3'), token_id = 0), balance = 200)]))...
 -> (Pair (Pair (Pair (Pair 9 (Pair 5 {8})) (Pair "tz1UyQDepgtUBnWjyzzonqeDwaiWoQzRKSP5" (Pair {Elt "tz1WxrQuZ4CK1MBUa2GqUWK1yJ4J6EtG1Gwi" (Pair (Pair 0 0) (Pair {} 200))} 1000006720014112009))) (Pair (Pair 5000000000000 (Pair 0 "KT1TezoooozzSmartPyzzSTATiCzzzwwBFA1")) (Pair 200 (Pair 1000000000000000000 "KT1Tezooo2zzSmartPyzzSTATiCzzzwqqQ4H")))) (Pair (Pair (Pair 500000000000000000 (Pair 1000000000000000000 "KT1Tezooo1zzSmartPyzzSTATiCzzzyfC8eF")) (Pair True (Pair None 0))) (Pair (Pair 1000000000000000000 (Pair 0 0)) (Pair 0 (Pair 0 200)))))
Executing (queue) getBorrowRate(sp.record(borrows = 0, cash = 200, cb = sp.contract(sp.TNat, sp.address('KT1Tezooo4zzSmartPyzzSTATiCzzzyPVdv3%doAccrueInterest')).open_some(), reserves = 0))...
 -> (Pair 840000000000 180000000000)
  + Transfer
     params: 840000000000
     amount: sp.tez(0)
     to:     sp.contract(sp.TNat, sp.address('KT1Tezooo4zzSmartPyzzSTATiCzzzyPVdv3%doAccrueInterest')).open_some()
Executing (queue) doAccrueInterest(840000000000)...
 -> (Pair (Pair (Pair (Pair 14 (Pair 5 {})) (Pair "tz1UyQDepgtUBnWjyzzonqeDwaiWoQzRKSP5" (Pair {Elt "tz1WxrQuZ4CK1MBUa2GqUWK1yJ4J6EtG1Gwi" (Pair (Pair 0 0) (Pair {} 200))} 1000010920042336068))) (Pair (Pair 5000000000000 (Pair 0 "KT1TezoooozzSmartPyzzSTATiCzzzwwBFA1")) (Pair 200 (Pair 1000000000000000000 "KT1Tezooo2zzSmartPyzzSTATiCzzzwqqQ4H")))) (Pair (Pair (Pair 500000000000000000 (Pair 1000000000000000000 "KT1Tezooo1zzSmartPyzzSTATiCzzzyfC8eF")) (Pair True (Pair None 0))) (Pair (Pair 1000000000000000000 (Pair 0 0)) (Pair 0 (Pair 0 200)))))
 => ../TezFinTest/CFA2_Tests/step_044_cont_0_params.py 1
 => ../TezFinTest/CFA2_Tests/step_044_cont_0_params.tz 1
 => ../TezFinTest/CFA2_Tests/step_044_cont_0_params.json 1
Executing updateAssetPrice(sp.address('KT1Tezooo4zzSmartPyzzSTATiCzzzyPVdv3'))...
 -> (Pair (Pair True True) (Pair True True))
 => ../TezFinTest/CFA2_Tests/step_045_cont_0_params.py 1
 => ../TezFinTest/CFA2_Tests/step_045_cont_0_params.tz 1
 => ../TezFinTest/CFA2_Tests/step_045_cont_0_params.json 1
Executing updateAccountLiquidity(sp.to_constant(sp.test_account("Alice").address))...
 -> (Pair (Pair True True) (Pair True True))
 => ../TezFinTest/CFA2_Tests/step_046_cont_4_params.py 1
 => ../TezFinTest/CFA2_Tests/step_046_cont_4_params.tz 1
 => ../TezFinTest/CFA2_Tests/step_046_cont_4_params.json 1
Executing borrow(10)...
 -> (Pair (Pair (Pair (Pair 14 (Pair 5 {})) (Pair "tz1UyQDepgtUBnWjyzzonqeDwaiWoQzRKSP5" (Pair {Elt "tz1WxrQuZ4CK1MBUa2GqUWK1yJ4J6EtG1Gwi" (Pair (Pair 1000010920042336068 10) (Pair {} 200))} 1000010920042336068))) (Pair (Pair 5000000000000 (Pair 0 "KT1TezoooozzSmartPyzzSTATiCzzzwwBFA1")) (Pair 200 (Pair 1000000000000000000 "KT1Tezooo2zzSmartPyzzSTATiCzzzwqqQ4H")))) (Pair (Pair (Pair 500000000000000000 (Pair 1000000000000000000 "KT1Tezooo1zzSmartPyzzSTATiCzzzyfC8eF")) (Pair False (Pair None 0))) (Pair (Pair 1000000000000000000 (Pair 0 0)) (Pair 10 (Pair 0 200)))))
  + Transfer
     params: sp.record(cToken = sp.address('KT1Tezooo4zzSmartPyzzSTATiCzzzyPVdv3'), borrower = sp.address('tz1WxrQuZ4CK1MBUa2GqUWK1yJ4J6EtG1Gwi'), borrowAmount = 10)
     amount: sp.tez(0)
     to:     sp.contract(sp.TRecord(borrowAmount = sp.TNat, borrower = sp.TAddress, cToken = sp.TAddress).layout(("cToken", ("borrower", "borrowAmount"))), sp.address('KT1TezoooozzSmartPyzzSTATiCzzzwwBFA1%borrowAllowed')).open_some()
  + Transfer
     params: sp.list([sp.record(from_ = sp.address('KT1Tezooo4zzSmartPyzzSTATiCzzzyPVdv3'), txs = sp.list([sp.record(to_ = sp.address('tz1WxrQuZ4CK1MBUa2GqUWK1yJ4J6EtG1Gwi'), token_id = 0, amount = 10)]))])
     amount: sp.tez(0)
     to:     sp.contract(sp.TList(sp.TRecord(from_ = sp.TAddress, txs = sp.TList(sp.TRecord(amount = sp.TNat, to_ = sp.TAddress, token_id = sp.TNat).layout(("to_", ("token_id", "amount"))))).layout(("from_", "txs"))), sp.address('KT1Tezooo2zzSmartPyzzSTATiCzzzwqqQ4H%transfer')).open_some()
Executing (queue) borrowAllowed(sp.record(cToken = sp.address('KT1Tezooo4zzSmartPyzzSTATiCzzzyPVdv3'), borrower = sp.address('tz1WxrQuZ4CK1MBUa2GqUWK1yJ4J6EtG1Gwi'), borrowAmount = 10))...
 -> (Pair (Pair True True) (Pair True True))
Executing (queue) transfer(sp.list([sp.record(from_ = sp.address('KT1Tezooo4zzSmartPyzzSTATiCzzzyPVdv3'), txs = sp.list([sp.record(to_ = sp.address('tz1WxrQuZ4CK1MBUa2GqUWK1yJ4J6EtG1Gwi'), token_id = 0, amount = 10)]))]))...
 -> (Pair (Pair (Pair "tz1UyQDepgtUBnWjyzzonqeDwaiWoQzRKSP5" 1) (Pair {Elt (Pair "KT1Tezooo4zzSmartPyzzSTATiCzzzyPVdv3" 0) 190; Elt (Pair "tz1WxrQuZ4CK1MBUa2GqUWK1yJ4J6EtG1Gwi" 0) 10} {Elt "" 0x68747470733a2f2f6578616d706c652e636f6d})) (Pair (Pair {Elt (Pair "tz1WxrQuZ4CK1MBUa2GqUWK1yJ4J6EtG1Gwi" (Pair "KT1Tezooo4zzSmartPyzzSTATiCzzzyPVdv3" 0)) Unit} False) (Pair {Elt 0 (Pair 0 {Elt "decimals" 0x32; Elt "name" 0x54686520546f6b656e205a65726f; Elt "symbol" 0x544b30})} {Elt 0 200})))
Verifying sp.contract_data(2).ledger[(sp.set_type_expr(sp.address('KT1Tezooo4zzSmartPyzzSTATiCzzzyPVdv3'), sp.TAddress), sp.set_type_expr(0, sp.TNat))].balance == 190...
 OK
Verifying sp.contract_data(2).ledger[(sp.set_type_expr(sp.to_constant(sp.test_account("Alice").address), sp.TAddress), sp.set_type_expr(0, sp.TNat))].balance == 10...
 OK
Comment...
 h2: Check verifySweepFA12
Comment...
 h3: With underlying token and correct id
 => ../TezFinTest/CFA2_Tests/step_051_cont_4_params.py 1
 => ../TezFinTest/CFA2_Tests/step_051_cont_4_params.tz 1
 => ../TezFinTest/CFA2_Tests/step_051_cont_4_params.json 1
Executing sweepFA2(sp.record(amount = 10, id = 0, tokenAddress = sp.address('KT1Tezooo2zzSmartPyzzSTATiCzzzwqqQ4H')))...
 -> --- Expected failure in transaction --- Wrong condition: ((params.tokenAddress != self.data.fa2_TokenAddress) | (params.id != self.data.tokenId) : sp.TBool) (contracts/CFA2.py, line 73)
Message: 'CT_SWEEP_UNDERLYING'
 (contracts/CFA2.py, line 74)
Comment...
 h3: With underlying token and wrong id
 => ../TezFinTest/CFA2_Tests/step_053_cont_2_params.py 1
 => ../TezFinTest/CFA2_Tests/step_053_cont_2_params.tz 1
 => ../TezFinTest/CFA2_Tests/step_053_cont_2_params.json 17
Executing mint(sp.record(address = sp.address('KT1Tezooo4zzSmartPyzzSTATiCzzzyPVdv3'), amount = 30, metadata = {'decimals' : sp.bytes('0x32'), 'name' : sp.bytes('0x54686520546f6b656e205a65726f'), 'symbol' : sp.bytes('0x544b30')}, token_id = 1))...
 -> (Pair (Pair (Pair "tz1UyQDepgtUBnWjyzzonqeDwaiWoQzRKSP5" 2) (Pair {Elt (Pair "KT1Tezooo4zzSmartPyzzSTATiCzzzyPVdv3" 0) 190; Elt (Pair "KT1Tezooo4zzSmartPyzzSTATiCzzzyPVdv3" 1) 30; Elt (Pair "tz1WxrQuZ4CK1MBUa2GqUWK1yJ4J6EtG1Gwi" 0) 10} {Elt "" 0x68747470733a2f2f6578616d706c652e636f6d})) (Pair (Pair {Elt (Pair "tz1WxrQuZ4CK1MBUa2GqUWK1yJ4J6EtG1Gwi" (Pair "KT1Tezooo4zzSmartPyzzSTATiCzzzyPVdv3" 0)) Unit} False) (Pair {Elt 0 (Pair 0 {Elt "decimals" 0x32; Elt "name" 0x54686520546f6b656e205a65726f; Elt "symbol" 0x544b30}); Elt 1 (Pair 1 {Elt "decimals" 0x32; Elt "name" 0x54686520546f6b656e205a65726f; Elt "symbol" 0x544b30})} {Elt 0 200; Elt 1 30})))
 => ../TezFinTest/CFA2_Tests/step_054_cont_4_params.py 1
 => ../TezFinTest/CFA2_Tests/step_054_cont_4_params.tz 1
 => ../TezFinTest/CFA2_Tests/step_054_cont_4_params.json 1
Executing sweepFA2(sp.record(amount = 10, id = 1, tokenAddress = sp.address('KT1Tezooo2zzSmartPyzzSTATiCzzzwqqQ4H')))...
 -> (Pair (Pair (Pair (Pair 14 (Pair 5 {})) (Pair "tz1UyQDepgtUBnWjyzzonqeDwaiWoQzRKSP5" (Pair {Elt "tz1WxrQuZ4CK1MBUa2GqUWK1yJ4J6EtG1Gwi" (Pair (Pair 1000010920042336068 10) (Pair {} 200))} 1000010920042336068))) (Pair (Pair 5000000000000 (Pair 0 "KT1TezoooozzSmartPyzzSTATiCzzzwwBFA1")) (Pair 200 (Pair 1000000000000000000 "KT1Tezooo2zzSmartPyzzSTATiCzzzwqqQ4H")))) (Pair (Pair (Pair 500000000000000000 (Pair 1000000000000000000 "KT1Tezooo1zzSmartPyzzSTATiCzzzyfC8eF")) (Pair False (Pair None 0))) (Pair (Pair 1000000000000000000 (Pair 0 0)) (Pair 10 (Pair 0 200)))))
  + Transfer
     params: sp.list([sp.record(from_ = sp.address('KT1Tezooo4zzSmartPyzzSTATiCzzzyPVdv3'), txs = sp.list([sp.record(to_ = sp.address('tz1UyQDepgtUBnWjyzzonqeDwaiWoQzRKSP5'), token_id = 1, amount = 10)]))])
     amount: sp.tez(0)
     to:     sp.contract(sp.TList(sp.TRecord(from_ = sp.TAddress, txs = sp.TList(sp.TRecord(amount = sp.TNat, to_ = sp.TAddress, token_id = sp.TNat).layout(("to_", ("token_id", "amount"))))).layout(("from_", "txs"))), sp.address('KT1Tezooo2zzSmartPyzzSTATiCzzzwqqQ4H%transfer')).open_some()
Executing (queue) transfer(sp.list([sp.record(from_ = sp.address('KT1Tezooo4zzSmartPyzzSTATiCzzzyPVdv3'), txs = sp.list([sp.record(to_ = sp.address('tz1UyQDepgtUBnWjyzzonqeDwaiWoQzRKSP5'), token_id = 1, amount = 10)]))]))...
 -> (Pair (Pair (Pair "tz1UyQDepgtUBnWjyzzonqeDwaiWoQzRKSP5" 2) (Pair {Elt (Pair "KT1Tezooo4zzSmartPyzzSTATiCzzzyPVdv3" 0) 190; Elt (Pair "KT1Tezooo4zzSmartPyzzSTATiCzzzyPVdv3" 1) 20; Elt (Pair "tz1UyQDepgtUBnWjyzzonqeDwaiWoQzRKSP5" 1) 10; Elt (Pair "tz1WxrQuZ4CK1MBUa2GqUWK1yJ4J6EtG1Gwi" 0) 10} {Elt "" 0x68747470733a2f2f6578616d706c652e636f6d})) (Pair (Pair {Elt (Pair "tz1WxrQuZ4CK1MBUa2GqUWK1yJ4J6EtG1Gwi" (Pair "KT1Tezooo4zzSmartPyzzSTATiCzzzyPVdv3" 0)) Unit} False) (Pair {Elt 0 (Pair 0 {Elt "decimals" 0x32; Elt "name" 0x54686520546f6b656e205a65726f; Elt "symbol" 0x544b30}); Elt 1 (Pair 1 {Elt "decimals" 0x32; Elt "name" 0x54686520546f6b656e205a65726f; Elt "symbol" 0x544b30})} {Elt 0 200; Elt 1 30})))
Comment...
 h3: With random token
 => ../TezFinTest/CFA2_Tests/step_056_cont_4_params.py 1
 => ../TezFinTest/CFA2_Tests/step_056_cont_4_params.tz 1
 => ../TezFinTest/CFA2_Tests/step_056_cont_4_params.json 1
Executing sweepFA2(sp.record(amount = 10, id = 0, tokenAddress = sp.address('KT10')))...
 -> (Pair (Pair (Pair (Pair 14 (Pair 5 {})) (Pair "tz1UyQDepgtUBnWjyzzonqeDwaiWoQzRKSP5" (Pair {Elt "tz1WxrQuZ4CK1MBUa2GqUWK1yJ4J6EtG1Gwi" (Pair (Pair 1000010920042336068 10) (Pair {} 200))} 1000010920042336068))) (Pair (Pair 5000000000000 (Pair 0 "KT1TezoooozzSmartPyzzSTATiCzzzwwBFA1")) (Pair 200 (Pair 1000000000000000000 "KT1Tezooo2zzSmartPyzzSTATiCzzzwqqQ4H")))) (Pair (Pair (Pair 500000000000000000 (Pair 1000000000000000000 "KT1Tezooo1zzSmartPyzzSTATiCzzzyfC8eF")) (Pair False (Pair None 0))) (Pair (Pair 1000000000000000000 (Pair 0 0)) (Pair 10 (Pair 0 200)))))
  + Transfer
     params: sp.list([sp.record(from_ = sp.address('KT1Tezooo4zzSmartPyzzSTATiCzzzyPVdv3'), txs = sp.list([sp.record(to_ = sp.address('tz1UyQDepgtUBnWjyzzonqeDwaiWoQzRKSP5'), token_id = 0, amount = 10)]))])
     amount: sp.tez(0)
     to:     sp.contract(sp.TList(sp.TRecord(from_ = sp.TAddress, txs = sp.TList(sp.TRecord(amount = sp.TNat, to_ = sp.TAddress, token_id = sp.TNat).layout(("to_", ("token_id", "amount"))))).layout(("from_", "txs"))), sp.address('KT10%transfer')).open_some()
 => ../TezFinTest/CFA2_Tests/log.html 4041
